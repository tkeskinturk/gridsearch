<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Using the gridsearch Package • gridsearch</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Using the gridsearch Package">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">gridsearch</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/usage.html">Using the gridsearch Package</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/tkeskinturk/gridsearch/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Using the gridsearch Package</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/tkeskinturk/gridsearch/blob/master/vignettes/usage.Rmd" class="external-link"><code>vignettes/usage.Rmd</code></a></small>
      <div class="d-none name"><code>usage.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="motivation">Motivation<a class="anchor" aria-label="anchor" href="#motivation"></a>
</h2>
<p>Researchers working with panel data on public opinion generally want
to know the answers to two basic questions: “how many people changed?”
and “how much they changed?”</p>
<p>That said, longitudinal change could result from various mechanisms:
large segments of the population may shift their opinions in a specific
direction in small or large amounts; a small segment of the population
may have large changes; or a mix of changes—including positive
<em>and</em> negative movements—may alter the overall balance.</p>
<p>More importantly, we cannot simply decompose the observed
trajectories to these components because reliability concerns mitigate
taking each survey response <em>too seriously</em>.</p>
<p>The <code>gridsearch</code> is designed to give researchers a
preliminary check as to what potential data generation processes may
have generated their observed data.</p>
</div>
<div class="section level2">
<h2 id="illustration">Illustration<a class="anchor" aria-label="anchor" href="#illustration"></a>
</h2>
<div class="section level3">
<h3 id="data-generation-processes">Data Generation Processes<a class="anchor" aria-label="anchor" href="#data-generation-processes"></a>
</h3>
<p>Think about a panel study, with an underlying data-generation process
(DGP). This panel study consists of 1,000 individuals observed across 3
time periods. Since this is a simulated data, we know that 50% of these
1,000 individuals <em>changed</em> their underlying latent positions
within this window with 1 SD in the positive direction. However, there
are reliability issues with this specific item (let’s say it’s measured
with a reliability of 90%) and the response resolution is 2 (suppose
people only say “agree” or “disagree”).</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># load the data</span></span>
<span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="st">"./simulated_data.rds"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># glimpse</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">d</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 3</span></span></span>
<span><span class="co">#&gt;     pid  time     y</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>     1     1     1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>     1     2     1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>     1     3     1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span>     2     1     0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span>     2     2     0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span>     2     3     0</span></span></code></pre></div>
<p>As we see, there are individuals (<code>pid</code>) observed on
<code>y</code> across <code>t</code>.</p>
<p>Over a three-wave period, we have multiple response patterns observed
in our empirical data or, more specifically, we have 8 potential
trajectories people can walk through):</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># load the patterns</span></span>
<span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="st">"./simulated_patterns.rds"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># glimpse</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">p</span><span class="op">)</span></span>
<span><span class="co">#&gt;   Time 1 Time 2 Time 3 Percentage</span></span>
<span><span class="co">#&gt; 1      1      1      1      0.340</span></span>
<span><span class="co">#&gt; 2      0      0      0      0.338</span></span>
<span><span class="co">#&gt; 3      0      0      1      0.110</span></span>
<span><span class="co">#&gt; 4      1      1      0      0.017</span></span>
<span><span class="co">#&gt; 5      0      1      1      0.110</span></span>
<span><span class="co">#&gt; 6      0      1      0      0.039</span></span>
<span><span class="co">#&gt; 7      1      0      1      0.031</span></span>
<span><span class="co">#&gt; 8      1      0      0      0.015</span></span></code></pre></div>
<p>Given this setup, how can we answer the two questions we initially
posed?</p>
</div>
<div class="section level3">
<h3 id="grid-search-algorithm">Grid Search Algorithm<a class="anchor" aria-label="anchor" href="#grid-search-algorithm"></a>
</h3>
<p>The grid-search algorithm tries to answer this question. It performs
five main steps:</p>
<ol style="list-style-type: decimal">
<li>
<p>Simulates data with several parameters of interest for our
DGPs—rate of change, strength of change, direction of change, and
reliability of response measurement—using</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>y</mi><mrow><mi>i</mi><mi>t</mi></mrow></msub><mo>=</mo><msub><mi>Y</mi><mi>i</mi></msub><mo>+</mo><mi>δ</mi><msub><mi>τ</mi><mi>i</mi></msub><msub><mi>D</mi><mrow><mi>i</mi><mi>t</mi></mrow></msub><mo>+</mo><msub><mi>ϵ</mi><mrow><mi>i</mi><mi>t</mi></mrow></msub><mspace width="0.222em"></mspace><mrow><mspace width="0.333em"></mspace><mtext mathvariant="normal"> with </mtext><mspace width="0.333em"></mspace></mrow><msub><mi>ϵ</mi><mrow><mi>i</mi><mi>t</mi></mrow></msub><mo>∼</mo><mi>𝒩</mi><mrow><mo stretchy="true" form="prefix">(</mo><mn>0</mn><mo>,</mo><mn>1</mn><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">
y_{it} = Y_i + \delta \tau_i D_{it} + \epsilon_{it} \ \text{ with } \epsilon_{it} \sim \mathcal{N}(0, 1) \tag{DGP}
</annotation></semantics></math></p>
<p>where we have a random variable
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>Y</mi><mi>i</mi></msub><annotation encoding="application/x-tex">Y_{i}</annotation></semantics></math>
for true scores, with varying realizations
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>y</mi><mrow><mi>i</mi><mi>t</mi></mrow></msub><annotation encoding="application/x-tex">y_{it}</annotation></semantics></math>,
representing a person
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>i</mi><annotation encoding="application/x-tex">i</annotation></semantics></math>’s
beliefs at time
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>t</mi><annotation encoding="application/x-tex">t</annotation></semantics></math>;
an indicator for change,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>D</mi><mrow><mi>i</mi><mi>t</mi></mrow></msub><annotation encoding="application/x-tex">D_{it}</annotation></semantics></math>,
operationalized as a non-reversible trigger if there is a
respondent-level change in true scores; an effect size,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>δ</mi><annotation encoding="application/x-tex">\delta</annotation></semantics></math>,
and a respondent level direction multiplier
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>τ</mi><mi>i</mi></msub><annotation encoding="application/x-tex">\tau_i</annotation></semantics></math>
that indexes whether the change is positive or
negative.[^changing]</p>
</li>
<li>
<p>Calculates the distribution of change scores in observed and
simulated data, by estimating respondent-level change scores using
survey response trajectories at the person level. To put it differently,
it first fits, for a binary outcome,</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ℙ</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>y</mi><mo>=</mo><mn>1</mn><mo stretchy="true" form="postfix">)</mo></mrow><mo>=</mo><msub><mi>β</mi><mn>0</mn></msub><mo>+</mo><msub><mi>β</mi><mn>1</mn></msub><mi>t</mi><mo>,</mo><mspace width="0.222em"></mspace><mspace width="0.222em"></mspace><mi>t</mi><mo>∈</mo><mrow><mo stretchy="true" form="prefix">[</mo><mn>0</mn><mo>,</mo><mn>1</mn><mo stretchy="true" form="postfix">]</mo></mrow></mrow><annotation encoding="application/x-tex">
\mathbb{P}(y = 1) = \beta_0 + \beta_1t, \ \ t \in [0, 1]
</annotation></semantics></math></p>
<p>where
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>t</mi><annotation encoding="application/x-tex">t</annotation></semantics></math>
is a normalized time variable, and estimates a predicted change score by
calculating the difference between the prediction at
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">t = 1</annotation></semantics></math>
and the prediction at
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">t = 0</annotation></semantics></math>.</p>
</li>
<li><p>Compares the distribution of simulated trajectories to the
distribution of observed trajectories by calculating a “distance”
score—specifically, Kolmogorov-Smirnov distance—to quantify the extent
to which specific simulated values reproduce the observed
values;</p></li>
<li><p>Replicates this analysis
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>N</mi><annotation encoding="application/x-tex">N</annotation></semantics></math>
times by drawing samples for our main parameters;</p></li>
<li><p>Inspects the parameter combinations that most closely approximate
to the observed values.</p></li>
</ol>
<p>Let’s apply this to our simulated dataset.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">grid</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/gridSearch.html">gridSearch</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">d</span>,</span>
<span>  yname <span class="op">=</span> <span class="st">'y'</span>, <span class="co">## observed binary outcome</span></span>
<span>  tname <span class="op">=</span> <span class="st">'time'</span>, <span class="co">## time variable</span></span>
<span>  pname <span class="op">=</span> <span class="st">'pid'</span>, <span class="co">## panel identifier</span></span>
<span>  n_samples <span class="op">=</span> <span class="fl">1e4</span> <span class="co">## the number of draws from the priors</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "10%"</span></span>
<span><span class="co">#&gt; [1] "20%"</span></span>
<span><span class="co">#&gt; [1] "30%"</span></span>
<span><span class="co">#&gt; [1] "40%"</span></span>
<span><span class="co">#&gt; [1] "50%"</span></span>
<span><span class="co">#&gt; [1] "60%"</span></span>
<span><span class="co">#&gt; [1] "70%"</span></span>
<span><span class="co">#&gt; [1] "80%"</span></span>
<span><span class="co">#&gt; [1] "90%"</span></span>
<span><span class="co">#&gt; [1] "100%"</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">grid</span><span class="op">)</span></span>
<span><span class="co">#&gt;    ic_sample pc_sample bal_sample rel_sample     error</span></span>
<span><span class="co">#&gt;        &lt;num&gt;     &lt;num&gt;      &lt;num&gt;      &lt;num&gt;     &lt;num&gt;</span></span>
<span><span class="co">#&gt; 1: 0.1615003 0.8343330 0.60076089  0.1572084 0.2002322</span></span>
<span><span class="co">#&gt; 2: 0.3604597 0.6863544 0.10009245  0.9301401 0.1770000</span></span>
<span><span class="co">#&gt; 3: 0.2552555 0.3090493 0.03734205  0.1698264 0.1782102</span></span>
<span><span class="co">#&gt; 4: 0.2721172 0.1380610 0.11318473  0.8798949 0.1500000</span></span>
<span><span class="co">#&gt; 5: 0.3497646 0.7063219 0.27114909  0.6377779 0.1260000</span></span>
<span><span class="co">#&gt; 6: 1.7581699 0.5516272 0.16823312  0.5071633 0.2640000</span></span></code></pre></div>
<p>The <code>gridSearch</code> function gives us a data table with five
columns:</p>
<ul>
<li>
<code>ic_sample</code> shows the value of the <code>strength</code>
parameter informing our DGP,</li>
<li>
<code>pc_sample</code> shows the value of the <code>rate</code>
parameter informing our DGP,</li>
<li>
<code>balance</code> shows the extent to which our sample makes
positive changes; put differently, it shows the <code>direction</code>
of change in the sample,</li>
<li>
<code>rel_sample</code> provides a value of the reliability score
retrieved from the search.</li>
<li>
<code>error</code> provides the KS distance between observed and
simulated trajectories.</li>
</ul>
</div>
<div class="section level3">
<h3 id="evaluating-the-potential-dgps">Evaluating the Potential DGPs<a class="anchor" aria-label="anchor" href="#evaluating-the-potential-dgps"></a>
</h3>
<p>We can visually inspect the best 5% accepted parameter distributions
using <code>gridPlot</code>:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/gridPlot.html">gridPlot</a></span><span class="op">(</span><span class="va">grid</span>, plot <span class="op">=</span> <span class="st">"posterior"</span>, percent <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span></code></pre></div>
<p><img src="usage_files/figure-html/unnamed-chunk-5-1.png" width="90%" style="display: block; margin: auto;"></p>
<p>Alternatively, we can look at the conditional accepted samples:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/gridPlot.html">gridPlot</a></span><span class="op">(</span><span class="va">grid</span>, plot <span class="op">=</span> <span class="st">"conditional"</span>, percent <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span></code></pre></div>
<p><img src="usage_files/figure-html/unnamed-chunk-6-1.png" width="90%" style="display: block; margin: auto;"></p>
</div>
</div>
<div class="section level2">
<h2 id="warnings-and-notes">Warnings and Notes<a class="anchor" aria-label="anchor" href="#warnings-and-notes"></a>
</h2>
<p>We would like to flag a few issues that you need to be aware of:</p>
<ul>
<li>Currently, <code>gridsearch</code> only accommodates binary
outcomes. We are hoping to generalize these procedures to cases where we
have more than 2 response categories.</li>
<li>
<code>gridSearch</code> requires a balanced panel dataset, with no
missing values.</li>
</ul>
<p>For more details about the protocol, please see the article, <em>The
Promises and Pitfalls of Using Panel Data to Understand Individual
Belief Change</em>, stored in <a href="https://osf.io/preprints/socarxiv/rhf4q" class="external-link">SocArXiv</a>.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Turgut Keskintürk, Pablo Bello, Stephen Vaisey.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
